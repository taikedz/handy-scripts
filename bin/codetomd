#!/usr/bin/python

import sys,re

debugmode = False

def printdebug(message):
    if debugmode:
        print ( "" % ("[33m", message, "[0m") )

def printemptyline():
    print ""

def printdocline(line, wascomment):
    if not wascomment:
        print "<hr />"

    if re.match('^#[^\s#]', line):
        print("%s %s %s" % ('<strike>`', line[:-1], '`</strike>'))

    else:
        print line[1:-1]

    return True

def printcodeline(line, wascomment):
    if wascomment:
        print ""
    print "\t"+line[:-1]
    return False

def processfile(filepath):
    fh = open(filepath)

    ''' Whether the previous item processed was a comment - allows for adding separations '''
    wascomment = False

    while True:
        line = fh.readline()
        if line == '':
            break

        printdebug(line)

        if re.match('^\s*#*\s*$', line):
            printemptyline()

        elif line[0] == '#':
            wascomment = printdocline(line, wascomment)

        else:
            wascomment = printcodeline(line, wascomment)

for shellfile in sys.argv[1:]:
    processfile(shellfile)
